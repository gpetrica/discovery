apiVersion: v1
kind: Service
metadata:
  name: snapcast-nodeport
  namespace: argocd
spec:
  type: NodePort
  selector:
    app: snapcast
  ports:
    # Snapcast core
    - name: snapcast-tcp
      port: 1704
      targetPort: 1704
      nodePort: 31704
      protocol: TCP
    - name: snapcast-udp
      port: 1705
      targetPort: 1705
      nodePort: 31705
      protocol: UDP
    - name: snapcast-http
      port: 1780
      targetPort: 1780
      nodePort: 31780
      protocol: TCP
    - name: snapcast-https
      port: 1788
      targetPort: 1788
      nodePort: 31788
      protocol: TCP

    # AirPlay 1
    - name: airplay-dmap
      port: 3689
      targetPort: 3689
      nodePort: 31689
      protocol: TCP
    - name: airplay-rtsp
      port: 5000
      targetPort: 5000
      nodePort: 31500
      protocol: TCP
    - name: airplay-mdns
      port: 5353
      targetPort: 5353
      nodePort: 31353
      protocol: UDP
    - name: airplay-udp-range
      port: 6000
      targetPort: 6000
      nodePort: 31600
      protocol: UDP

    # Optional AirPlay 2 / NQPTP (comment if not needed)
    - name: airplay2-rtsp
      port: 7000
      targetPort: 7000
      nodePort: 31700
      protocol: TCP
    - name: airplay2-nqptp-319
      port: 319
      targetPort: 319
      nodePort: 31319
      protocol: UDP
    - name: airplay2-nqptp-320
      port: 320
      targetPort: 320
      nodePort: 31320
      protocol: UDP
